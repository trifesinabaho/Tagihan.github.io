<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tagihan Air</title>
  <link rel="icon" type="image/png" href="img-removebg-preview.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .container-box {background: white;padding: 24px;border-radius: 12px;width: 100%;max-width: 380px;box-shadow: 0 8px 25px rgba(0,0,0,0.2);}
    .logo {width: 90px;height: auto;}
    .title {font-size: 26px;font-weight: bold;text-align: center;margin-bottom: 18px;color: #003366;}
    .label {font-size: 14px;font-weight: 600;color: #003366;}
    .input {width: 100%;padding: 10px;border: 1px solid #bbb;border-radius: 8px;}
    .btn {width: 100%;margin-top: 8px;background: #0066ff;color: white;padding: 10px;font-weight: 700;border-radius: 8px;cursor: pointer;}
    .btn:hover {background: #004ecc;}
    .total {background: #f5f5f5;font-weight: bold;}
  </style>
</head>
<body class="bg-blue-700 min-h-screen flex items-center justify-center p-6">
  <div class="container-box">
    <div class="flex justify-center mb-6">
      <img src="img-removebg-preview.png" alt="Logo" class="logo">
    </div>
    <h2 class="title">Tagihan Air</h2>
    <div class="space-y-4">
      <div><label class="label">Nama Pelanggan</label><input id="namaPelanggan" type="text" class="input"></div>
      <div><label class="label">Jenis Layanan</label><select id="jenisLayanan" class="input"><option value="pdam">PDAM – Rp 10.000 / m³</option><option value="plta">PLTA – Rp 27.000 / kWh</option></select></div>
      <div><label class="label">Pemakaian (m³ / kWh)</label><input id="debitAir" type="number" class="input"></div>
      <div><label class="label">Total Pembayaran (Rp)</label><input id="totalPembayaran" type="text" disabled class="input total"></div>
      <button id="simpanBtn" class="btn">Simpan ke Google Sheet</button>
    </div>
  </div>
  <script>
    const debitInput = document.getElementById("debitAir");
    const layananSelect = document.getElementById("jenisLayanan");
    const totalPembayaranInput = document.getElementById("totalPembayaran");
    const simpanBtn = document.getElementById("simpanBtn");
    function hitungTagihan() {
      const debit = parseFloat(debitInput.value) || 0;
      const layanan = layananSelect.value;
      let tarif = 0;
      if (layanan === "pdam") tarif = 10000;
      if (layanan === "plta") tarif = 27000;
      const total = debit * tarif;
      totalPembayaranInput.value = total.toLocaleString("id-ID");
    }
    debitInput.addEventListener("input", hitungTagihan);
    layananSelect.addEventListener("change", hitungTagihan);
    const scriptURL = "https://script.google.com/macros/s/AKfycbwd21lUPOkcUgWKb4LKqOCO6iDBT9VfQ7J_uewUQrTeFVHdNmIDretQDqcHe_gE6HrPyg/exec";
    simpanBtn.addEventListener("click", () => {
      const data = {
        nama: document.getElementById("namaPelanggan").value,
        layanan: layananSelect.value,
        pemakaian: debitInput.value,
        total: totalPembayaranInput.value
      };
      fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify(data),
        headers: { "Content-Type": "application/json" }
      })
      .then(response => response.text())
      .then(result => { alert("Data berhasil disimpan ke Google Sheet!"); })
      .catch(error => { alert("Gagal menyimpan data."); console.error("Error:", error); });
    });
  </script>
</body>
</html>